import React, { useState, useRef, useEffect, useCallback } from 'react';
import { 
  FileText, 
  Users, 
  Clock, 
  MessageSquare, 
  Share2, 
  Download, 
  Upload, 
  Save, 
  Folder, 
  Search,
  Filter,
  Star,
  Tag,
  Calendar,
  Eye,
  Edit,
  Trash2,
  Copy,
  Move,
  Archive,
  RefreshCw,
  Settings,
  User,
  Bell,
  CheckCircle,
  AlertCircle,
  Info,
  Play,
  Pause,
  Square,
  Camera,
  Video,
  Mic,
  Monitor,
  Smartphone,
  Tablet,
  Globe,
  Code,
  Package,
  Workflow
} from 'lucide-react';

const ProfessionalWorkflowModule = () => {
  // Project Management State
  const [projects, setProjects] = useState([
    {
      id: 1,
      name: 'Brand Identity Redesign',
      client: 'TechCorp Inc.',
      status: 'In Progress',
      priority: 'High',
      progress: 75,
      lastModified: new Date('2025-08-15'),
      collaborators: ['john@example.com', 'sarah@design.co'],
      tags: ['branding', 'logo', 'colors'],
      files: [
        { name: 'logo-v1.psd', size: '24.5 MB', type: 'psd', modified: new Date() },
        { name: 'color-palette.ai', size: '1.2 MB', type: 'ai', modified: new Date() }
      ]
    },
    {
      id: 2,
      name: 'Website Mockups',
      client: 'StartupXYZ',
      status: 'Review',
      priority: 'Medium',
      progress: 90,
      lastModified: new Date('2025-08-14'),
      collaborators: ['mike@startup.xyz'],
      tags: ['web', 'ui', 'responsive'],
      files: [
        { name: 'homepage-desktop.fig', size: '15.8 MB', type: 'fig', modified: new Date() },
        { name: 'mobile-views.sketch', size: '8.4 MB', type: 'sketch', modified: new Date() }
      ]
    }
  ]);

  // Collaboration State
  const [activeCollaborators, setActiveCollaborators] = useState([
    { id: 1, name: 'John Doe', email: 'john@example.com', avatar: 'üë®‚Äçüíº', status: 'online', cursor: { x: 120, y: 80 } },
    { id: 2, name: 'Sarah Chen', email: 'sarah@design.co', avatar: 'üë©‚Äçüé®', status: 'away', cursor: { x: 200, y: 150 } }
  ]);

  // Comments and Annotations
  const [comments, setComments] = useState([
    {
      id: 1,
      author: 'John Doe',
      content: 'The logo needs more contrast. Can we try a darker blue?',
      position: { x: 150, y: 100 },
      timestamp: new Date('2025-08-17T10:30:00'),
      resolved: false,
      replies: [
        {
          id: 2,
          author: 'Sarah Chen',
          content: 'Good point! I\'ll update the color palette.',
          timestamp: new Date('2025-08-17T11:15:00')
        }
      ]
    }
  ]);

  // Version Control
  const [versions, setVersions] = useState([
    {
      id: 1,
      version: 'v3.2',
      author: 'Sarah Chen',
      timestamp: new Date('2025-08-17T09:00:00'),
      description: 'Updated logo proportions and added new color variants',
      thumbnail: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="60"><rect width="100%" height="100%" fill="%23f0f0f0"/><text x="50%" y="50%" text-anchor="middle" dy=".3em">Logo v3.2</text></svg>',
      changes: ['Modified logo proportions', 'Added 3 color variants', 'Optimized for mobile']
    },
    {
      id: 2,
      version: 'v3.1',
      author: 'John Doe',
      timestamp: new Date('2025-08-16T16:45:00'),
      description: 'Initial brand guidelines implementation',
      thumbnail: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="60"><rect width="100%" height="100%" fill="%23e0e0e0"/><text x="50%" y="50%" text-anchor="middle" dy=".3em">Logo v3.1</text></svg>',
      changes: ['Created base logo design', 'Added typography guide', 'Set color palette']
    }
  ]);

  // Asset Management
  const [assets, setAssets] = useState([
    {
      id: 1,
      name: 'Corporate Logo',
      type: 'logo',
      format: 'SVG',
      size: '2.4 KB',
      tags: ['primary', 'vector', 'scalable'],
      lastUsed: new Date('2025-08-17'),
      usage: 15,
      thumbnail: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><rect width="100%" height="100%" fill="%234f46e5"/><text x="50%" y="50%" text-anchor="middle" dy=".3em" fill="white">LOGO</text></svg>'
    },
    {
      id: 2,
      name: 'Brand Colors',
      type: 'palette',
      format: 'ASE',
      size: '1.1 KB',
      tags: ['primary', 'brand', 'colors'],
      lastUsed: new Date('2025-08-16'),
      usage: 8,
      thumbnail: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><rect width="20" height="100%" fill="%234f46e5"/><rect x="20" width="20" height="100%" fill="%2306b6d4"/><rect x="40" width="20" height="100%" fill="%2310b981"/></svg>'
    }
  ]);

  // Workflow Automation
  const [automations, setAutomations] = useState([
    {
      id: 1,
      name: 'Auto Export to Web',
      trigger: 'On Save',
      actions: ['Export PNG @2x', 'Optimize for web', 'Upload to CDN'],
      enabled: true,
      lastRun: new Date('2025-08-17T12:30:00')
    },
    {
      id: 2,
      name: 'Generate Social Media Variants',
      trigger: 'Manual',
      actions: ['Resize for Instagram', 'Resize for Facebook', 'Resize for Twitter'],
      enabled: true,
      lastRun: new Date('2025-08-16T14:15:00')
    }
  ]);

  // Time Tracking
  const [timeTracking, setTimeTracking] = useState({
    isTracking: false,
    currentSession: 0,
    totalToday: 145, // minutes
    totalProject: 1280, // minutes
    sessions: [
      { start: new Date('2025-08-17T09:00:00'), end: new Date('2025-08-17T10:30:00'), task: 'Logo refinement' },
      { start: new Date('2025-08-17T11:00:00'), end: new Date('2025-08-17T12:15:00'), task: 'Color palette adjustment' }
    ]
  });

  // Real-time collaboration functions
  const addComment = (x, y, content) => {
    const newComment = {
      id: Date.now(),
      author: 'Current User',
      content,
      position: { x, y },
      timestamp: new Date(),
      resolved: false,
      replies: []
    };
    setComments([...comments, newComment]);
  };

  const resolveComment = (commentId) => {
    setComments(comments.map(comment => 
      comment.id === commentId ? { ...comment, resolved: true } : comment
    ));
  };

  // Version control functions
  const createVersion = (description, changes) => {
    const newVersion = {
      id: Date.now(),
      version: `v${versions.length + 1}.0`,
      author: 'Current User',
      timestamp: new Date(),
      description,
      thumbnail: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="60"><rect width="100%" height="100%" fill="%23d1d5db"/><text x="50%" y="50%" text-anchor="middle" dy=".3em">New Version</text></svg>',
      changes
    };
    setVersions([newVersion, ...versions]);
  };

  // Asset management functions
  const addAsset = (asset) => {
    setAssets([...assets, { ...asset, id: Date.now() }]);
  };

  const searchAssets = (query) => {
    return assets.filter(asset => 
      asset.name.toLowerCase().includes(query.toLowerCase()) ||
      asset.tags.some(tag => tag.toLowerCase().includes(query.toLowerCase()))
    );
  };

  // Time tracking functions
  const startTimeTracking = (task) => {
    setTimeTracking(prev => ({
      ...prev,
      isTracking: true,
      currentSession: 0,
      currentTask: task,
      sessionStart: new Date()
    }));
  };

  const stopTimeTracking = () => {
    const sessionEnd = new Date();
    const duration = Math.round((sessionEnd - timeTracking.sessionStart) / 60000); // minutes
    
    setTimeTracking(prev => ({
      ...prev,
      isTracking: false,
      totalToday: prev.totalToday + duration,
      totalProject: prev.totalProject + duration,
      sessions: [...prev.sessions, {
        start: prev.sessionStart,
        end: sessionEnd,
        task: prev.currentTask,
        duration
      }]
    }));
  };

  // Export and delivery functions
  const exportForDelivery = (format, settings) => {
    // Simulate export process
    console.log(`Exporting in ${format} format with settings:`, settings);
    
    // Generate different export formats
    const exports = {
      'print': { dpi: 300, colorSpace: 'CMYK', format: 'PDF' },
      'web': { dpi: 72, colorSpace: 'RGB', format: 'PNG' },
      'social': { sizes: ['1080x1080', '1200x628', '1080x1920'], format: 'JPEG' },
      'mobile': { sizes: ['@1x', '@2x', '@3x'], format: 'PNG' }
    };
    
    return exports[format] || exports.web;
  };

  // Component state
  const [selectedProject, setSelectedProject] = useState(projects[0]);
  const [activeTab, setActiveTab] = useState('overview');
  const [showComments, setShowComments] = useState(true);
  const [searchQuery, setSearchQuery] = useState('');

  const tabs = [
    { id: 'overview', label: 'Overview', icon: FileText },
    { id: 'collaborate', label: 'Collaborate', icon: Users },
    { id: 'versions', label: 'Versions', icon: Clock },
    { id: 'assets', label: 'Assets', icon: Package },
    { id: 'workflow', label: 'Workflow', icon: Workflow },
    { id: 'export', label: 'Export', icon: Download }
  ];

  return (
    <div className="bg-gray-900 text-white min-h-screen">
      {/* Top Navigation */}
      <div className="bg-gray-800 border-b border-gray-700 p-4">
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-4">
            <h1 className="text-xl font-bold">Professional Studio</h1>
            <select
              value={selectedProject.id}
              onChange={(e) => setSelectedProject(projects.find(p => p.id === parseInt(e.target.value)))}
              className="bg-gray-700 border border-gray-600 rounded px-3 py-1"
            >
              {projects.map(project => (
                <option key={project.id} value={project.id}>{project.name}</option>
              ))}
            </select>
          </div>
          
          <div className="flex items-center gap-4">
            {/* Active Collaborators */}
            <div className="flex -space-x-2">
              {activeCollaborators.map(user => (
                <div
                  key={user.id}
                  className="w-8 h-8 rounded-full bg-gray-600 border-2 border-gray-800 flex items-center justify-center text-sm"
                  title={`${user.name} (${user.status})`}
                >
                  {user.avatar}
                </div>
              ))}
            </div>
            
            {/* Time Tracker */}
            <div className="flex items-center gap-2 bg-gray-700 px-3 py-1 rounded">
              {timeTracking.isTracking ? (
                <button onClick={stopTimeTracking} className="text-red-400">
                  <Square size={16} />
                </button>
              ) : (
                <button onClick={() => startTimeTracking('Design work')} className="text-green-400">
                  <Play size={16} />
                </button>
              )}
              <span className="text-sm font-mono">
                {Math.floor(timeTracking.totalToday / 60)}h {timeTracking.totalToday % 60}m
              </span>
            </div>
            
            <Bell className="text-gray-400 cursor-pointer hover:text-white" size={20} />
            <Settings className="text-gray-400 cursor-pointer hover:text-white" size={20} />
          </div>
        </div>
        
        {/* Tab Navigation */}
        <div className="flex gap-1 mt-4">
          {tabs.map(tab => (
            <button
              key={tab.id}
              onClick={() => setActiveTab(tab.id)}
              className={`px-4 py-2 rounded-t-lg flex items-center gap-2 ${
                activeTab === tab.id
                  ? 'bg-gray-700 text-white'
                  : 'bg-gray-800 text-gray-400 hover:text-white'
              }`}
            >
              <tab.icon size={16} />
              {tab.label}
            </button>
          ))}
        </div>
      </div>

      <div className="flex">
        {/* Main Content Area */}
        <div className="flex-1 p-6">
          {activeTab === 'overview' && (
            <div className="space-y-6">
              {/* Project Status Card */}
              <div className="bg-gray-800 rounded-lg p-6">
                <div className="flex items-center justify-between mb-4">
                  <h2 className="text-2xl font-bold">{selectedProject.name}</h2>
                  <span className={`px-3 py-1 rounded-full text-sm ${
                    selectedProject.status === 'In Progress' ? 'bg-blue-600' :
                    selectedProject.status === 'Review' ? 'bg-yellow-600' :
                    'bg-green-600'
                  }`}>
                    {selectedProject.status}
                  </span>
                </div>
                
                <div className="grid grid-cols-4 gap-4 mb-6">
                  <div>
                    <div className="text-gray-400 text-sm">Client</div>
                    <div className="font-semibold">{selectedProject.client}</div>
                  </div>
                  <div>
                    <div className="text-gray-400 text-sm">Progress</div>
                    <div className="flex items-center gap-2">
                      <div className="flex-1 bg-gray-700 rounded-full h-2">
                        <div
                          className="bg-blue-500 h-2 rounded-full"
                          style={{ width: `${selectedProject.progress}%` }}
                        />
                      </div>
                      <span className="text-sm">{selectedProject.progress}%</span>
                    </div>
                  </div>
                  <div>
                    <div className="text-gray-400 text-sm">Priority</div>
                    <div className={`font-semibold ${
                      selectedProject.priority === 'High' ? 'text-red-400' :
                      selectedProject.priority === 'Medium' ? 'text-yellow-400' :
                      'text-green-400'
                    }`}>
                      {selectedProject.priority}
                    </div>
                  </div>
                  <div>
                    <div className="text-gray-400 text-sm">Last Modified</div>
                    <div className="font-semibold">
                      {selectedProject.lastModified.toLocaleDateString()}
                    </div>
                  </div>
                </div>
                
                {/* Tags */}
                <div className="flex gap-2 mb-4">
                  {selectedProject.tags.map(tag => (
                    <span key={tag} className="bg-gray-700 px-2 py-1 rounded text-sm">
                      #{tag}
                    </span>
                  ))}
                </div>
              </div>

              {/* Recent Files */}
              <div className="bg-gray-800 rounded-lg p-6">
                <h3 className="text-lg font-semibold mb-4">Recent Files</h3>
                <div className="space-y-3">
                  {selectedProject.files.map((file, index) => (
                    <div key={index} className="flex items-center justify-between p-3 bg-gray-700 rounded">
                      <div className="flex items-center gap-3">
                        <div className="w-10 h-10 bg-blue-600 rounded flex items-center justify-center text-sm font-bold">
                          {file.type.toUpperCase()}
                        </div>
                        <div>
                          <div className="font-medium">{file.name}</div>
                          <div className="text-sm text-gray-400">{file.size} ‚Ä¢ Modified {file.modified.toLocaleDateString()}</div>
                        </div>
                      </div>
                      <div className="flex gap-2">
                        <button className="p-2 hover:bg-gray-600 rounded">
                          <Eye size={16} />
                        </button>
                        <button className="p-2 hover:bg-gray-600 rounded">
                          <Edit size={16} />
                        </button>
                        <button className="p-2 hover:bg-gray-600 rounded">
                          <Share2 size={16} />
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}

          {activeTab === 'collaborate' && (
            <div className="space-y-6">
              {/* Active Collaborators */}
              <div className="bg-gray-800 rounded-lg p-6">
                <h3 className="text-lg font-semibold mb-4">Active Collaborators</h3>
                <div className="space-y-3">
                  {activeCollaborators.map(user => (
                    <div key={user.id} className="flex items-center justify-between p-3 bg-gray-700 rounded">
                      <div className="flex items-center gap-3">
                        <div className="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
                          {user.avatar}
                        </div>
                        <div>
                          <div className="font-medium">{user.name}</div>
                          <div className="text-sm text-gray-400">{user.email}</div>
                        </div>
                      </div>
                      <div className="flex items-center gap-2">
                        <div className={`w-2 h-2 rounded-full ${
                          user.status === 'online' ? 'bg-green-400' :
                          user.status === 'away' ? 'bg-yellow-400' :
                          'bg-gray-400'
                        }`} />
                        <span className="text-sm text-gray-400 capitalize">{user.status}</span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              {/* Comments and Feedback */}
              <div className="bg-gray-800 rounded-lg p-6">
                <div className="flex items-center justify-between mb-4">
                  <h3 className="text-lg font-semibold">Comments & Feedback</h3>
                  <button
                    onClick={() => setShowComments(!showComments)}
                    className={`px-3 py-1 rounded ${showComments ? 'bg-blue-600' : 'bg-gray-600'}`}
                  >
                    {showComments ? 'Hide' : 'Show'} Comments
                  </button>
                </div>
                
                <div className="space-y-4">
                  {comments.map(comment => (
                    <div key={comment.id} className={`p-4 rounded-lg ${comment.resolved ? 'bg-gray-700 opacity-60' : 'bg-gray-700'}`}>
                      <div className="flex items-start justify-between mb-2">
                        <div className="flex items-center gap-2">
                          <strong>{comment.author}</strong>
                          <span className="text-xs text-gray-400">
                            {comment.timestamp.toLocaleTimeString()}
                          </span>
                        </div>
                        {!comment.resolved && (
                          <button
                            onClick={() => resolveComment(comment.id)}
                            className="text-green-400 hover:text-green-300"
                          >
                            <CheckCircle size={16} />
                          </button>
                        )}
                      </div>
                      <p className="text-gray-300 mb-3">{comment.content}</p>
                      
                      {comment.replies.length > 0 && (
                        <div className="border-l-2 border-gray-600 pl-4 space-y-2">
                          {comment.replies.map(reply => (
                            <div key={reply.id} className="text-sm">
                              <strong>{reply.author}</strong>
                              <span className="text-gray-400 ml-2">
                                {reply.timestamp.toLocaleTimeString()}
                              </span>
                              <p className="text-gray-300 mt-1">{reply.content}</p>
                            </div>
                          ))}
                        </div>
                      )}
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}

          {activeTab === 'versions' && (
            <div className="space-y-6">
              <div className="bg-gray-800 rounded-lg p-6">
                <div className="flex items-center justify-between mb-4">
                  <h3 className="text-lg font-semibold">Version History</h3>
                  <button
                    onClick={() => createVersion('New version', ['Manual save'])}
                    className="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded"
                  >
                    Create Version
                  </button>
                </div>
                
                <div className="space-y-4">
                  {versions.map(version => (
                    <div key={version.id} className="flex gap-4 p-4 bg-gray-700 rounded-lg">
                      <img 
                        src={version.thumbnail} 
                        alt={`Version ${version.version}`}
                        className="w-20 h-12 object-cover rounded"
                      />
                      <div className="flex-1">
                        <div className="flex items-center gap-3 mb-2">
                          <h4 className="font-semibold">{version.version}</h4>
                          <span className="text-sm text-gray-400">by {version.author}</span>
                          <span className="text-sm text-gray-400">
                            {version.timestamp.toLocaleDateString()}
                          </span>
                        </div>
                        <p className="text-gray-300 mb-2">{version.description}</p>
                        <div className="text-sm text-gray-400">
                          Changes: {version.changes.join(', ')}
                        </div>
                      </div>
                      <div className="flex gap-2">
                        <button className="p-2 hover:bg-gray-600 rounded">
                          <Eye size={16} />
                        </button>
                        <button className="p-2 hover:bg-gray-600 rounded">
                          <RefreshCw size={16} />
                        </button>
                        <button className="p-2 hover:bg-gray-600 rounded">
                          <Download size={16} />
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}

          {activeTab === 'assets' && (
            <div className="space-y-6">
              {/* Asset Search */}
              <div className="bg-gray-800 rounded-lg p-4">
                <div className="flex gap-4">
                  <div className="flex-1 relative">
                    <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" size={16} />
                    <input
                      type="text"
                      placeholder="Search assets..."
                      value={searchQuery}
                      onChange={(e) => setSearchQuery(e.target.value)}
                      className="w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded"
                    />
                  </div>
                  <button className="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded">
                    <Upload size={16} className="inline mr-2" />
                    Upload Asset
                  </button>
                </div>
              </div>

              {/* Asset Grid */}
              <div className="grid grid-cols-3 gap-4">
                {assets.filter(asset => 
                  asset.name.toLowerCase().includes(searchQuery.toLowerCase())
                ).map(asset => (
                  <div key={asset.id} className="bg-gray-800 rounded-lg p-4">
                    <div className="aspect-square bg-gray-700 rounded mb-3 flex items-center justify-center">
                      <img src={asset.thumbnail} alt={asset.name} className="max-w-full max-h-full" />
                    </div>
                    <h4 className="font-semibold mb-1">{asset.name}</h4>
                    <div className="text-sm text-gray-400 mb-2">
                      {asset.format} ‚Ä¢ {asset.size}
                    </div>
                    <div className="flex gap-1 mb-2 flex-wrap">
                      {asset.tags.map(tag => (
                        <span key={tag} className="bg-gray-700 px-2 py-1 rounded text-xs">
                          {tag}
                        </span>
                      ))}
                    </div>
                    <div className="text-xs text-gray-500">
                      Used {asset.usage} times ‚Ä¢ Last used {asset.lastUsed.toLocaleDateString()}
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}

          {activeTab === 'workflow' && (
            <div className="space-y-6">
              {/* Automation Rules */}
              <div className="bg-gray-800 rounded-lg p-6">
                <div className="flex items-center justify-between mb-4">
                  <h3 className="text-lg font-semibold">Automation Rules</h3>
                  <button className="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded">
                    Create Rule
                  </button>
                </div>
                
                <div className="space-y-3">
                  {automations.map(automation => (
                    <div key={automation.id} className="flex items-center justify-between p-4 bg-gray-700 rounded">
                      <div className="flex-1">
                        <div className="flex items-center gap-3 mb-1">
                          <h4 className="font-semibold">{automation.name}</h4>
                          <span className={`w-2 h-2 rounded-full ${automation.enabled ? 'bg-green-400' : 'bg-gray-400'}`} />
                        </div>
                        <div className="text-sm text-gray-400 mb-1">
                          Trigger: {automation.trigger}
                        </div>
                        <div className="text-sm text-gray-300">
                          Actions: {automation.actions.join(' ‚Üí ')}
                        </div>
                        <div className="text-xs text-gray-500 mt-1">
                          Last run: {automation.lastRun.toLocaleString()}
                        </div>
                      </div>
                      <div className="flex gap-2">
                        <button className="p-2 hover:bg-gray-600 rounded">
                          <Edit size={16} />
                        </button>
                        <button className="p-2 hover:bg-gray-600 rounded">
                          <Play size={16} />
                        </button>
                        <label className="flex items-center">
                          <input
                            type="checkbox"
                            checked={automation.enabled}
                            onChange={(e) => setAutomations(automations.map(a => 
                              a.id === automation.id ? { ...a, enabled: e.target.checked } : a
                            ))}
                            className="mr-2"
                          />
                        </label>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              {/* Time Tracking Details */}
              <div className="bg-gray-800 rounded-lg p-6">
                <h3 className="text-lg font-semibold mb-4">Time Tracking</h3>
                <div className="grid grid-cols-3 gap-4 mb-6">
                  <div className="text-center">
                    <div className="text-2xl font-bold text-blue-400">
                      {Math.floor(timeTracking.totalToday / 60)}h {timeTracking.totalToday % 60}m
                    </div>
                    <div className="text-sm text-gray-400">Today</div>
                  </div>
                  <div className="text-center">
                    <div className="text-2xl font-bold text-green-400">
                      {Math.floor(timeTracking.totalProject / 60)}h {timeTracking.totalProject % 60}m
                    </div>
                    <div className="text-sm text-gray-400">This Project</div>
                  </div>
                  <div className="text-center">
                    <div className="text-2xl font-bold text-purple-400">
                      {timeTracking.sessions.length}
                    </div>
                    <div className="text-sm text-gray-400">Sessions</div>
                  </div>
                </div>
                
                <div className="space-y-2">
                  <h4 className="font-semibold">Recent Sessions</h4>
                  {timeTracking.sessions.slice(-5).map((session, index) => (
                    <div key={index} className="flex justify-between items-center p-2 bg-gray-700 rounded">
                      <span className="text-sm">{session.task}</span>
                      <div className="text-sm text-gray-400">
                        {session.start.toLocaleTimeString()} - {session.end.toLocaleTimeString()}
                        {session.duration && ` (${session.duration}m)`}
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}

          {activeTab === 'export' && (
            <div className="space-y-6">
              {/* Export Presets */}
              <div className="bg-gray-800 rounded-lg p-6">
                <h3 className="text-lg font-semibold mb-4">Export Presets</h3>
                <div className="grid grid-cols-2 gap-4">
                  <button
                    onClick={() => exportForDelivery('print')}
                    className="p-4 bg-gray-700 hover:bg-gray-600 rounded-lg text-left"
                  >
                    <div className="flex items-center gap-3 mb-2">
                      <FileText className="text-blue-400" size={20} />
                      <span className="font-semibold">Print Ready</span>
                    </div>
                    <div className="text-sm text-gray-400">
                      300 DPI, CMYK, PDF format
                    </div>
                  </button>
                  
                  <button
                    onClick={() => exportForDelivery('web')}
                    className="p-4 bg-gray-700 hover:bg-gray-600 rounded-lg text-left"
                  >
                    <div className="flex items-center gap-3 mb-2">
                      <Globe className="text-green-400" size={20} />
                      <span className="font-semibold">Web Optimized</span>
                    </div>
                    <div className="text-sm text-gray-400">
                      72 DPI, RGB, PNG format
                    </div>
                  </button>
                  
                  <button
                    onClick={() => exportForDelivery('social')}
                    className="p-4 bg-gray-700 hover:bg-gray-600 rounded-lg text-left"
                  >
                    <div className="flex items-center gap-3 mb-2">
                      <Share2 className="text-purple-400" size={20} />
                      <span className="font-semibold">Social Media</span>
                    </div>
                    <div className="text-sm text-gray-400">
                      Multiple sizes, optimized JPEG
                    </div>
                  </button>
                  
                  <button
                    onClick={() => exportForDelivery('mobile')}
                    className="p-4 bg-gray-700 hover:bg-gray-600 rounded-lg text-left"
                  >
                    <div className="flex items-center gap-3 mb-2">
                      <Smartphone className="text-orange-400" size={20} />
                      <span className="font-semibold">Mobile Assets</span>
                    </div>
                    <div className="text-sm text-gray-400">
                      @1x, @2x, @3x variants
                    </div>
                  </button>
                </div>
              </div>

              {/* Custom Export Settings */}
              <div className="bg-gray-800 rounded-lg p-6">
                <h3 className="text-lg font-semibold mb-4">Custom Export</h3>
                <div className="grid grid-cols-2 gap-6">
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium mb-2">Format</label>
                      <select className="w-full p-2 bg-gray-700 border border-gray-600 rounded">
                        <option>PNG</option>
                        <option>JPEG</option>
                        <option>SVG</option>
                        <option>PDF</option>
                        <option>WebP</option>
                      </select>
                    </div>
                    
                    <div>
                      <label className="block text-sm font-medium mb-2">Quality</label>
                      <input
                        type="range"
                        min="1"
                        max="100"
                        defaultValue="90"
                        className="w-full"
                      />
                    </div>
                    
                    <div>
                      <label className="block text-sm font-medium mb-2">Color Space</label>
                      <select className="w-full p-2 bg-gray-700 border border-gray-600 rounded">
                        <option>RGB</option>
                        <option>CMYK</option>
                        <option>sRGB</option>
                        <option>Adobe RGB</option>
                      </select>
                    </div>
                  </div>
                  
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium mb-2">Resolution (DPI)</label>
                      <input
                        type="number"
                        defaultValue="300"
                        className="w-full p-2 bg-gray-700 border border-gray-600 rounded"
                      />
                    </div>
                    
                    <div>
                      <label className="block text-sm font-medium mb-2">Size</label>
                      <div className="flex gap-2">
                        <input
                          type="number"
                          placeholder="Width"
                          className="flex-1 p-2 bg-gray-700 border border-gray-600 rounded"
                        />
                        <span className="flex items-center">√ó</span>
                        <input
                          type="number"
                          placeholder="Height"
                          className="flex-1 p-2 bg-gray-700 border border-gray-600 rounded"
                        />
                      </div>
                    </div>
                    
                    <div className="flex items-center gap-2">
                      <input type="checkbox" id="transparent" />
                      <label htmlFor="transparent" className="text-sm">Transparent background</label>
                    </div>
                  </div>
                </div>
                
                <button className="w-full mt-6 py-3 bg-blue-600 hover:bg-blue-700 rounded font-medium">
                  Export with Custom Settings
                </button>
              </div>
            </div>
          )}
        </div>

        {/* Right Sidebar - Quick Actions */}
        <div className="w-80 bg-gray-800 border-l border-gray-700 p-4 space-y-4">
          <div className="bg-gray-700 p-4 rounded-lg">
            <h4 className="font-semibold mb-3">Quick Actions</h4>
            <div className="space-y-2">
              <button className="w-full p-2 bg-blue-600 hover:bg-blue-700 rounded text-sm">
                Save Version
              </button>
              <button className="w-full p-2 bg-green-600 hover:bg-green-700 rounded text-sm">
                Share for Review
              </button>
              <button className="w-full p-2 bg-purple-600 hover:bg-purple-700 rounded text-sm">
                Generate Variants
              </button>
              <button className="w-full p-2 bg-orange-600 hover:bg-orange-700 rounded text-sm">
                Export All Formats
              </button>
            </div>
          </div>

          {/* Project Stats */}
          <div className="bg-gray-700 p-4 rounded-lg">
            <h4 className="font-semibold mb-3">Project Stats</h4>
            <div className="space-y-2 text-sm">
              <div className="flex justify-between">
                <span className="text-gray-400">Files:</span>
                <span>{selectedProject.files.length}</span>
              </div>
              <div className="flex justify-between">
                <span className="text-gray-400">Collaborators:</span>
                <span>{selectedProject.collaborators.length}</span>
              </div>
              <div className="flex justify-between">
                <span className="text-gray-400">Comments:</span>
                <span>{comments.filter(c => !c.resolved).length} active</span>
              </div>
              <div className="flex justify-between">
                <span className="text-gray-400">Versions:</span>
                <span>{versions.length}</span>
              </div>
            </div>
          </div>

          {/* Recent Activity */}
          <div className="bg-gray-700 p-4 rounded-lg">
            <h4 className="font-semibold mb-3">Recent Activity</h4>
            <div className="space-y-3 text-sm">
              <div className="flex gap-2">
                <Clock className="text-gray-400 mt-0.5" size={14} />
                <div>
                  <div className="text-gray-300">Sarah updated logo design</div>
                  <div className="text-gray-500 text-xs">2 hours ago</div>
                </div>
              </div>
              <div className="flex gap-2">
                <MessageSquare className="text-gray-400 mt-0.5" size={14} />
                <div>
                  <div className="text-gray-300">John added a comment</div>
                  <div className="text-gray-500 text-xs">4 hours ago</div>
                </div>
              </div>
              <div className="flex gap-2">
                <Upload className="text-gray-400 mt-0.5" size={14} />
                <div>
                  <div className="text-gray-300">New asset uploaded</div>
                  <div className="text-gray-500 text-xs">1 day ago</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default ProfessionalWorkflowModule;